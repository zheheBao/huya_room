import {AppRegistry, Platform, Dimensions} from 'react-native-web'
import { defineProxy } from './global'

global.__os = Platform.OS
var device = global.__device = {}
defineProxy(device, 'height', () => Dimensions.get('window').height)
defineProxy(device, 'width', () => Dimensions.get('window').width)

export const registerApp = (componentName, component) => {
  if (Platform.OS === 'web') {
    AppRegistry.registerComponent(componentName, () => component)
    // 不兼容的特性, 升级到大版本.
    // 需要相匹配的 beyond builder.
    // AppRegistry.runApplication(componentName, {rootTag: document.getElementById('root')})
  } else {
    throw new Error('the platform is not web')
  }
}

export const SDK = window.hyExt
export const Taf = window.Taf
